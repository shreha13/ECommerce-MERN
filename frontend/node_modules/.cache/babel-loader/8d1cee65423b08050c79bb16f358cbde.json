{"ast":null,"code":"const {\n  CART_ITEM_ADD,\n  CART_ITEM_LOADING,\n  CART_ITEM_REMOVE,\n  CART_ITEM_FAIL,\n  CART_SAVE_ADDRESS\n} = require(\"../actions/types\");\n\nconst initialState = {\n  cartItems: [],\n  error: null,\n  loading: false,\n  shippingAddress: {}\n};\n\nconst cartReducer = (state = initialState, {\n  type,\n  payload\n}) => {\n  switch (type) {\n    case CART_ITEM_ADD:\n      const item = payload;\n      const itemExist = state.cartItems.find(i => i.product === item.product);\n      debugger;\n\n      if (itemExist) {\n        return { ...state,\n          cartItems: state.cartItems.map(x => x.product === itemExist.product ? item : x),\n          loading: false,\n          error: null\n        };\n      } else {\n        return { ...state,\n          cartItems: [...state.cartItems, item],\n          loading: false,\n          error: null\n        };\n      }\n\n    case CART_ITEM_LOADING:\n      return { ...state,\n        loading: true\n      };\n\n    case CART_ITEM_REMOVE:\n      return { ...state,\n        cartItems: [...state.cartItems.filter(i => i.product !== payload)],\n        loading: false\n      };\n\n    case CART_ITEM_FAIL:\n      return { ...state,\n        cartItems: [],\n        loading: false,\n        error: payload\n      };\n\n    case CART_SAVE_ADDRESS:\n      return { ...state,\n        shippingAddress: payload\n      };\n\n    default:\n      return state;\n  }\n};\n\nexport default cartReducer;","map":{"version":3,"sources":["D:/GitHub/ECommerce-MERN/frontend/src/reducers/cart.js"],"names":["CART_ITEM_ADD","CART_ITEM_LOADING","CART_ITEM_REMOVE","CART_ITEM_FAIL","CART_SAVE_ADDRESS","require","initialState","cartItems","error","loading","shippingAddress","cartReducer","state","type","payload","item","itemExist","find","i","product","map","x","filter"],"mappings":"AAAA,MAAM;AACJA,EAAAA,aADI;AAEJC,EAAAA,iBAFI;AAGJC,EAAAA,gBAHI;AAIJC,EAAAA,cAJI;AAKJC,EAAAA;AALI,IAMFC,OAAO,CAAC,kBAAD,CANX;;AAQA,MAAMC,YAAY,GAAG;AACnBC,EAAAA,SAAS,EAAE,EADQ;AAEnBC,EAAAA,KAAK,EAAE,IAFY;AAGnBC,EAAAA,OAAO,EAAE,KAHU;AAInBC,EAAAA,eAAe,EAAE;AAJE,CAArB;;AAOA,MAAMC,WAAW,GAAG,CAACC,KAAK,GAAGN,YAAT,EAAuB;AAAEO,EAAAA,IAAF;AAAQC,EAAAA;AAAR,CAAvB,KAA6C;AAC/D,UAAQD,IAAR;AACE,SAAKb,aAAL;AACE,YAAMe,IAAI,GAAGD,OAAb;AACA,YAAME,SAAS,GAAGJ,KAAK,CAACL,SAAN,CAAgBU,IAAhB,CAAsBC,CAAD,IAAOA,CAAC,CAACC,OAAF,KAAcJ,IAAI,CAACI,OAA/C,CAAlB;AACA;;AACA,UAAIH,SAAJ,EAAe;AACb,eAAO,EACL,GAAGJ,KADE;AAELL,UAAAA,SAAS,EAAEK,KAAK,CAACL,SAAN,CAAgBa,GAAhB,CAAqBC,CAAD,IAC7BA,CAAC,CAACF,OAAF,KAAcH,SAAS,CAACG,OAAxB,GAAkCJ,IAAlC,GAAyCM,CADhC,CAFN;AAKLZ,UAAAA,OAAO,EAAE,KALJ;AAMLD,UAAAA,KAAK,EAAE;AANF,SAAP;AAQD,OATD,MASO;AACL,eAAO,EACL,GAAGI,KADE;AAELL,UAAAA,SAAS,EAAE,CAAC,GAAGK,KAAK,CAACL,SAAV,EAAqBQ,IAArB,CAFN;AAGLN,UAAAA,OAAO,EAAE,KAHJ;AAILD,UAAAA,KAAK,EAAE;AAJF,SAAP;AAMD;;AACH,SAAKP,iBAAL;AACE,aAAO,EACL,GAAGW,KADE;AAELH,QAAAA,OAAO,EAAE;AAFJ,OAAP;;AAIF,SAAKP,gBAAL;AACE,aAAO,EACL,GAAGU,KADE;AAELL,QAAAA,SAAS,EAAE,CAAC,GAAGK,KAAK,CAACL,SAAN,CAAgBe,MAAhB,CAAwBJ,CAAD,IAAOA,CAAC,CAACC,OAAF,KAAcL,OAA5C,CAAJ,CAFN;AAGLL,QAAAA,OAAO,EAAE;AAHJ,OAAP;;AAKF,SAAKN,cAAL;AACE,aAAO,EACL,GAAGS,KADE;AAELL,QAAAA,SAAS,EAAE,EAFN;AAGLE,QAAAA,OAAO,EAAE,KAHJ;AAILD,QAAAA,KAAK,EAAEM;AAJF,OAAP;;AAMF,SAAKV,iBAAL;AACE,aAAO,EACL,GAAGQ,KADE;AAELF,QAAAA,eAAe,EAAEI;AAFZ,OAAP;;AAIF;AACE,aAAOF,KAAP;AA9CJ;AAgDD,CAjDD;;AAmDA,eAAeD,WAAf","sourcesContent":["const {\r\n  CART_ITEM_ADD,\r\n  CART_ITEM_LOADING,\r\n  CART_ITEM_REMOVE,\r\n  CART_ITEM_FAIL,\r\n  CART_SAVE_ADDRESS,\r\n} = require(\"../actions/types\");\r\n\r\nconst initialState = {\r\n  cartItems: [],\r\n  error: null,\r\n  loading: false,\r\n  shippingAddress: {},\r\n};\r\n\r\nconst cartReducer = (state = initialState, { type, payload }) => {\r\n  switch (type) {\r\n    case CART_ITEM_ADD:\r\n      const item = payload;\r\n      const itemExist = state.cartItems.find((i) => i.product === item.product);\r\n      debugger;\r\n      if (itemExist) {\r\n        return {\r\n          ...state,\r\n          cartItems: state.cartItems.map((x) =>\r\n            x.product === itemExist.product ? item : x\r\n          ),\r\n          loading: false,\r\n          error: null,\r\n        };\r\n      } else {\r\n        return {\r\n          ...state,\r\n          cartItems: [...state.cartItems, item],\r\n          loading: false,\r\n          error: null,\r\n        };\r\n      }\r\n    case CART_ITEM_LOADING:\r\n      return {\r\n        ...state,\r\n        loading: true,\r\n      };\r\n    case CART_ITEM_REMOVE:\r\n      return {\r\n        ...state,\r\n        cartItems: [...state.cartItems.filter((i) => i.product !== payload)],\r\n        loading: false,\r\n      };\r\n    case CART_ITEM_FAIL:\r\n      return {\r\n        ...state,\r\n        cartItems: [],\r\n        loading: false,\r\n        error: payload,\r\n      };\r\n    case CART_SAVE_ADDRESS:\r\n      return {\r\n        ...state,\r\n        shippingAddress: payload,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default cartReducer;\r\n"]},"metadata":{},"sourceType":"module"}